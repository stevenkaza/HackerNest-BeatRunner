<html>

<script src="javascript/jquery-2.0.3.js"></script>
<script src="javascript/socket.io.js"></script>


<body>

	<p>ACCEL-X: </p><p id="accelerometer-x">0</p>
	
	<p>Max Accel-x: </p><p id="max">0</p>
	<p>Min Accel-x: </p><p id="min">0</p>
	<p>Diff: </p><p id="diff">0</p>

</body>

<script>

 var kiwisocket = io.connect('http://build.kiwiwearables.com:8080');
// this stuff all runs once
 var toParse = null;
 var Ax = 0;
 var Ay = 0;
 var Az = 0;
 var Gx = 0;
 var Gy = 0;
 var Gz = 0;
 
 var max = 0;
 var min = 0;
 var diff = 0;
 var oldAx = 0;

// Enter your device id and password here

kiwisocket.on('connect', function() {
	kiwisocket.emit('listen', {device_id: '32', password: '123'});
});

kiwisocket.on('listen_response', function(data) { //listen response updates every tick

	//console.log(data);

	toParse = JSON.parse(data.message); //reads json output from server of the current information from the kiwi

	oldAx=Ax;
	
	Ax = parseFloat(toParse.ax); //read from json string
	Ay = parseFloat(toParse.ay);
	Az = parseFloat(toParse.az);  

	Gx = parseFloat(toParse.gx);
	Gy = parseFloat(toParse.gy);
	Gz = parseFloat(toParse.gz);

	
	$('#accelerometer-x').html(Ax); //make id tag work with it in html
	$('#accelerometer-y').html(Ay);
	$('#accelerometer-z').html(Az);

	$('#gyroscope-x').html(Gx);
	$('#gyroscope-y').html(Gy);
	$('#gyroscope-z').html(Gz);
	

	if(Ax > max){ //checks if current more than original max
		$('#max').html(Ax);
		max = Ax;
	}
	else if(Ax < min){
		$('#min').html(Ax);
		min = Ax;
	}
	
	diff = oldAx-Ax;
	$('#diff').html(diff);
	
});

</script>

</html>